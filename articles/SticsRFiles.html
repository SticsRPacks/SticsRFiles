<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SticsRFiles â€¢ SticsRFiles</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="SticsRFiles">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SticsRFiles</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/SticsRFiles.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Generating_Stics_text_files.html">Generating STICS text files from XML files</a>
    </li>
    <li>
      <a href="../articles/Generating_Stics_XML_files.html">Generating STICS XML files from tabulated data</a>
    </li>
    <li>
      <a href="../articles/Manipulating_Stics_text_files.html">Manipulating STICS text files</a>
    </li>
    <li>
      <a href="../articles/Manipulating_Stics_XML_files.html">Manipulating STICS XML files</a>
    </li>
    <li>
      <a href="../articles/Upgrading_STICS_XML_files.html">Upgrading STICS XML files</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/SticsRPacks/SticsRFiles/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>SticsRFiles</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/SticsRPacks/SticsRFiles/blob/v1.6.0/vignettes/SticsRFiles.Rmd" class="external-link"><code>vignettes/SticsRFiles.Rmd</code></a></small>
      <div class="hidden name"><code>SticsRFiles.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SticsRPacks/SticsRFiles" class="external-link">SticsRFiles</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The goal of SticsRFiles is to perform manipulations of all types of
files related to the input and outputs of the STICS model.</p>
<p>This article presents the design of the package and its basic
features, <em>i.e.</em> the main functions to deal with the XML files.
For a complete introduction to SticsRPacks (managing files, running
simulations, plotting, optimizationâ€¦), see the tutorial from the <a href="https://sticsrpacks.github.io/SticsRPacks/" class="external-link">SticsRPacks</a>
package.</p>
</div>
<div class="section level2">
<h2 id="concepts">Concepts<a class="anchor" aria-label="anchor" href="#concepts"></a>
</h2>
<div class="section level3">
<h3 id="input-files">Input files<a class="anchor" aria-label="anchor" href="#input-files"></a>
</h3>
<div class="section level4">
<h4 id="text-files">Text files<a class="anchor" aria-label="anchor" href="#text-files"></a>
</h4>
<p>The executable of the STICS model reads text files with standard
names and format to import the inputs describing a single unit of
simulation (USM), <em>e.g.</em> one crop for one year.</p>
<p>Hereâ€™s a typical list of the input files for the STICS executable
(without the optional files):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">workspace</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">â”‚</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> ðŸ“œclimat.txt               <span class="co"># The meteorological data for the USM</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> ðŸ“œficini.txt               <span class="co"># The initialization</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> ðŸ“œficplt1.txt              <span class="co"># Parameters for the plant to be simulated</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> ðŸ“œfictec1.txt              <span class="co"># The management applied to the soil and crop</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> ðŸ“œnew_travail.usm          <span class="co"># The general configuration parameters for the USM</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> ðŸ“œparam.sol                <span class="co"># Soil parameters</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> ðŸ“œstation.txt              <span class="co"># The site parameters (*e.g.* altitude, latitude)</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> ðŸ“œtempopar.sti             <span class="co"># More general parameters not in the other files</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="ex">â”œâ”€â”€</span> ðŸ“œtempoparv6.sti           <span class="co"># Parameters for the custom versions of STICS</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="ex">â””â”€â”€</span> ðŸ“œvar.mod                  <span class="co"># Variables to write in the outputs</span></span></code></pre></div>
<p>Because these files only describe one USM at a time and can be
tedious to explore and parameterize, we usually donâ€™t interact with them
directly, but through another program: JavaSTICS.</p>
</div>
<div class="section level4">
<h4 id="xml-files">XML files<a class="anchor" aria-label="anchor" href="#xml-files"></a>
</h4>
<p>JavaSTICS is a graphical user interface used to easily create input
text files for the STICS executable according to the userâ€™s choices, and
for managing STICS simulations. JavaSTICS saves the parameter values and
options choices in XML files.</p>
<p>The XML files store more information than the text files: not only do
they store the parameter values but also their description, maximum and
minimum boundary values, all existing formalisms, the different choices
allowed, and more importantly they allow for the management of several
USMs in the same folder (called workspace), and can help make successive
USMs.</p>
<p>It is important to note that only JavaSTICS interact with the XML
files, <strong>not</strong> the STICS executable. The STICS input text
files are then automatically created by JavaSTICS when running a
simulation, just before calling the STICS executable.</p>
</div>
</div>
<div class="section level3">
<h3 id="sticsrfiles">SticsRFiles<a class="anchor" aria-label="anchor" href="#sticsrfiles"></a>
</h3>
<p>SticsRFiles is an R package that uses JavaSTICS from the command line
to manage the XML and the text files. We can generate XML or text files,
get and set parameter values, import simulations outputs, and manage
observation files.</p>
<p>Advanced features also include:</p>
<ul>
<li>The generation of XML input files from templates included in the
package, and</li>
<li>The production of XML input files using a mailing process from XML
templates and Excel sheets containing multiple simulations contexts</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="short-example">Short example<a class="anchor" aria-label="anchor" href="#short-example"></a>
</h2>
<p>Hereâ€™s a simple example usage of SticsRFiles using an example
workspace.</p>
<div class="section level3">
<h3 id="example-data">Example data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h3>
<p>All the example data used in this article are available from the <a href="https://github.com/SticsRPacks/data" class="external-link"><code>data</code>
repository</a> in the <code>SticsRPacks</code> organization.</p>
<p>SticsRFiles provides a function to download it from the command line.
Please execute the following command in R:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SticsRPacks/SticsRFiles" class="external-link">SticsRFiles</a></span><span class="op">)</span></span>
<span><span class="va">example_data</span> <span class="op">&lt;-</span> <span class="fu">SticsRFiles</span><span class="fu">::</span><span class="fu"><a href="../reference/download_data.html">download_data</a></span><span class="op">(</span></span>
<span>  example_dirs <span class="op">=</span> <span class="st">"study_case_1"</span>,</span>
<span>  stics_version <span class="op">=</span> <span class="st">"V10.0"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The example data is downloaded by default in a temporary folder.</p>
<p>For the sake of readability, weâ€™ll declare the workspace path and the
path to the plant file here. But remember the functions can be applied
to any XML files or workspaces.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">workspace</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="st">"XmlFiles"</span><span class="op">)</span></span>
<span><span class="va">plant_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">workspace</span>, <span class="st">"plant"</span>, <span class="st">"maisopti_plt.xml"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-usage">Example usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h3>
<div class="section level4">
<h4 id="find-a-stics-variable">Find a STICS variable<a class="anchor" aria-label="anchor" href="#find-a-stics-variable"></a>
</h4>
<p><code><a href="../reference/get_var_info.html">get_var_info()</a></code> helps to get any STICS variable name by
doing a fuzzy search. For example to get all variables with
<code>lai</code> in their names, you would do:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SticsRFiles</span><span class="fu">::</span><span class="fu"><a href="../reference/get_var_info.html">get_var_info</a></span><span class="op">(</span><span class="st">"lai"</span><span class="op">)</span></span>
<span><span class="co">#&gt;              name</span></span>
<span><span class="co">#&gt; 5       albedolai</span></span>
<span><span class="co">#&gt; 242        exolai</span></span>
<span><span class="co">#&gt; 338        innlai</span></span>
<span><span class="co">#&gt; 353        lai(n)</span></span>
<span><span class="co">#&gt; 354 lai_mx_av_cut</span></span>
<span><span class="co">#&gt; 355        laimax</span></span>
<span><span class="co">#&gt; 356     laisen(n)</span></span>
<span><span class="co">#&gt; 742         splai</span></span>
<span><span class="co">#&gt; 805       ulai(n)</span></span>
<span><span class="co">#&gt;                                                           definition</span></span>
<span><span class="co">#&gt; 5                   albedo of the crop including soil and vegetation</span></span>
<span><span class="co">#&gt; 242              reduction factor on leaf growth due to water excess</span></span>
<span><span class="co">#&gt; 338 reduction factor on leaf growth due to NNI (nitrogen deficiency)</span></span>
<span><span class="co">#&gt; 353                                          leaf area index (table)</span></span>
<span><span class="co">#&gt; 354            LAI before cut (for cut crops , for others = lai(n) )</span></span>
<span><span class="co">#&gt; 355                                          maximum leaf area index</span></span>
<span><span class="co">#&gt; 356                      leaf area index of senescent leaves (table)</span></span>
<span><span class="co">#&gt; 742                source to sink ratio of assimilates in the leaves</span></span>
<span><span class="co">#&gt; 805                                relative development unit for LAI</span></span>
<span><span class="co">#&gt;            unit type</span></span>
<span><span class="co">#&gt; 5            SD real</span></span>
<span><span class="co">#&gt; 242         0-1 real</span></span>
<span><span class="co">#&gt; 338 innmin to 1 real</span></span>
<span><span class="co">#&gt; 353      m2.m-2 real</span></span>
<span><span class="co">#&gt; 354          SD real</span></span>
<span><span class="co">#&gt; 355      m2.m-2 real</span></span>
<span><span class="co">#&gt; 356      m2.m-2 real</span></span>
<span><span class="co">#&gt; 742          SD real</span></span>
<span><span class="co">#&gt; 805         0-3 real</span></span></code></pre></div>
<p>Sometimes it is also useful to search in the variable definition
instead of its name. To do so, you can use the <code>keyword</code>
argument like so:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SticsRFiles</span><span class="fu">::</span><span class="fu"><a href="../reference/get_var_info.html">get_var_info</a></span><span class="op">(</span>keyword <span class="op">=</span> <span class="st">"lai"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                   name</span></span>
<span><span class="co">#&gt; 5            albedolai</span></span>
<span><span class="co">#&gt; 171 diftemp1intercoupe</span></span>
<span><span class="co">#&gt; 172 diftemp2intercoupe</span></span>
<span><span class="co">#&gt; 242             exolai</span></span>
<span><span class="co">#&gt; 334     inn1intercoupe</span></span>
<span><span class="co">#&gt; 336     inn2intercoupe</span></span>
<span><span class="co">#&gt; 338             innlai</span></span>
<span><span class="co">#&gt; 353             lai(n)</span></span>
<span><span class="co">#&gt; 354      lai_mx_av_cut</span></span>
<span><span class="co">#&gt; 355             laimax</span></span>
<span><span class="co">#&gt; 356          laisen(n)</span></span>
<span><span class="co">#&gt; 360               leai</span></span>
<span><span class="co">#&gt; 742              splai</span></span>
<span><span class="co">#&gt; 745     str1intercoupe</span></span>
<span><span class="co">#&gt; 746     str2intercoupe</span></span>
<span><span class="co">#&gt; 747     stu1intercoupe</span></span>
<span><span class="co">#&gt; 748     stu2intercoupe</span></span>
<span><span class="co">#&gt; 801           tustress</span></span>
<span><span class="co">#&gt; 805            ulai(n)</span></span>
<span><span class="co">#&gt;                                                                                                         definition</span></span>
<span><span class="co">#&gt; 5                                                                 albedo of the crop including soil and vegetation</span></span>
<span><span class="co">#&gt; 171        mean difference between crop and air temperatures during the vegetative phase (emergence - maximum LAI)</span></span>
<span><span class="co">#&gt; 172       mean difference between crop and air temperatures during the reproductive phase (maximum LAI - maturity)</span></span>
<span><span class="co">#&gt; 242                                                            reduction factor on leaf growth due to water excess</span></span>
<span><span class="co">#&gt; 334                               average NNI during the cut (cut crop vegetative phase: emergence to maximum LAI)</span></span>
<span><span class="co">#&gt; 336                             average NNI during the cut (cut crop reproductive phase: maximum LAI  to maturity)</span></span>
<span><span class="co">#&gt; 338                                               reduction factor on leaf growth due to NNI (nitrogen deficiency)</span></span>
<span><span class="co">#&gt; 353                                                                                        leaf area index (table)</span></span>
<span><span class="co">#&gt; 354                                                          LAI before cut (for cut crops , for others = lai(n) )</span></span>
<span><span class="co">#&gt; 355                                                                                        maximum leaf area index</span></span>
<span><span class="co">#&gt; 356                                                                    leaf area index of senescent leaves (table)</span></span>
<span><span class="co">#&gt; 360                                                                                 Leaf+ear area index = lai +eai</span></span>
<span><span class="co">#&gt; 742                                                              source to sink ratio of assimilates in the leaves</span></span>
<span><span class="co">#&gt; 745      average stomatal water stress index during the vegetative phase (emergence - maximum LAI) of forage crops</span></span>
<span><span class="co">#&gt; 746    average stomatal water stress index during the reproductive phase (maximum LAI  - maturity) of forage crops</span></span>
<span><span class="co">#&gt; 747   average turgescence water stress index during the vegetative phase (emergence - maximum LAI) of forage crops</span></span>
<span><span class="co">#&gt; 748 average turgescence water stress index during the reproductive phase (maximum LAI  - maturity) of forage crops</span></span>
<span><span class="co">#&gt; 801                      reduction factor on leaf growth due to the effective water stress  (= min(turfac,innlai))</span></span>
<span><span class="co">#&gt; 805                                                                              relative development unit for LAI</span></span>
<span><span class="co">#&gt;            unit type</span></span>
<span><span class="co">#&gt; 5            SD real</span></span>
<span><span class="co">#&gt; 171     degreeC real</span></span>
<span><span class="co">#&gt; 172     degreeC real</span></span>
<span><span class="co">#&gt; 242         0-1 real</span></span>
<span><span class="co">#&gt; 334         0-2 real</span></span>
<span><span class="co">#&gt; 336         0-2 real</span></span>
<span><span class="co">#&gt; 338 innmin to 1 real</span></span>
<span><span class="co">#&gt; 353      m2.m-2 real</span></span>
<span><span class="co">#&gt; 354          SD real</span></span>
<span><span class="co">#&gt; 355      m2.m-2 real</span></span>
<span><span class="co">#&gt; 356      m2.m-2 real</span></span>
<span><span class="co">#&gt; 360      m2.m-2 real</span></span>
<span><span class="co">#&gt; 742          SD real</span></span>
<span><span class="co">#&gt; 745         0-1 real</span></span>
<span><span class="co">#&gt; 746         0-1 real</span></span>
<span><span class="co">#&gt; 747         0-1 real</span></span>
<span><span class="co">#&gt; 748         0-1 real</span></span>
<span><span class="co">#&gt; 801         0-1 real</span></span>
<span><span class="co">#&gt; 805         0-3 real</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="get-informations-on-parameters">Get informations on parameters<a class="anchor" aria-label="anchor" href="#get-informations-on-parameters"></a>
</h4>
<p><code><a href="../reference/get_param_info.html">get_param_info()</a></code> can be used giving a part of parameters
names, here is a subset of the parameters names containing
<code>lai</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_param_info.html">get_param_info</a></span><span class="op">(</span>param <span class="op">=</span> <span class="st">"lai"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;             name    file   min max</span></span>
<span><span class="co">#&gt; 225    cielclair STATION     0   1</span></span>
<span><span class="co">#&gt; 305 codeclaircie  PARTEC     1   2</span></span>
<span><span class="co">#&gt; 339    codelaitr  PARPLT     1   2</span></span>
<span><span class="co">#&gt; 408    codlainet  PARPLT     1   2</span></span>
<span><span class="co">#&gt; 556      dlaimax  PARPLT 5e-06 0.5</span></span>
<span><span class="co">#&gt; 557  dlaimaxbrut  PARPLT 5e-06 0.5</span></span>
<span><span class="co">#&gt;                                                                                       definition</span></span>
<span><span class="co">#&gt; 225             fraction of sunny hours allowing the inversion of thermal gradient with altitude</span></span>
<span><span class="co">#&gt; 305                     option to simulate fruit removal: 1 = no, 2 = yes (for smallest fruits) </span></span>
<span><span class="co">#&gt; 339          option to calculate the intercepted radiation according to: 1 = LAI, 2 = soil cover</span></span>
<span><span class="co">#&gt; 408 option to calculate the LAI: 1 = net LAI, 2 = difference between gross LAI and senescent LAI</span></span>
<span><span class="co">#&gt; 556                                                    maximum rate of net daily increase of LAI</span></span>
<span><span class="co">#&gt; 557                                                  maximum rate of gross daily increase of LAI</span></span></code></pre></div>
<p>it can also be used by giving a keyword that will be searched in the
parameters names and definitions, here is a subset of the parameters
names containing <code>plant</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_param_info.html">get_param_info</a></span><span class="op">(</span>keyword <span class="op">=</span> <span class="st">"plant"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                      name   file  min max</span></span>
<span><span class="co">#&gt; 4                   adens PARPLT   -2   0</span></span>
<span><span class="co">#&gt; 6                    adil PARPLT    1   7</span></span>
<span><span class="co">#&gt; 7                 adilmax PARPLT    3  10</span></span>
<span><span class="co">#&gt; 57     albedomulchresidus  PARAM 0.05 0.8</span></span>
<span><span class="co">#&gt; 58  albedomulchresidus(1)  PARAM 0.05 0.8</span></span>
<span><span class="co">#&gt; 59 albedomulchresidus(10)  PARAM 0.05 0.8</span></span>
<span><span class="co">#&gt;                                                                 definition</span></span>
<span><span class="co">#&gt; 4                                         Interplant competition parameter</span></span>
<span><span class="co">#&gt; 6       parameter of the critical dilution curve [Nplante]=adil MS^(-bdil)</span></span>
<span><span class="co">#&gt; 7  parameter of the maximum dilution curve [Nplante]=adilmax MS^(-bdilmax)</span></span>
<span><span class="co">#&gt; 57                                                   albedo of plant mulch</span></span>
<span><span class="co">#&gt; 58                                                   albedo of plant mulch</span></span>
<span><span class="co">#&gt; 59                                                   albedo of plant mulch</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="get-parameter-values">Get parameter values<a class="anchor" aria-label="anchor" href="#get-parameter-values"></a>
</h4>
<p><code><a href="../reference/get_param_xml.html">get_param_xml()</a></code> is used to get the values of a parameter
in an XML file. For example if we want to get <code>dlaimax</code>, we
would do:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dlaimax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_param_xml.html">get_param_xml</a></span><span class="op">(</span><span class="va">plant_file</span>, <span class="st">"dlaimax"</span><span class="op">)</span></span>
<span><span class="va">dlaimax</span></span>
<span><span class="co">#&gt; $maisopti_plt.xml</span></span>
<span><span class="co">#&gt; $maisopti_plt.xml$dlaimax</span></span>
<span><span class="co">#&gt; [1] 0.00321 0.00321 0.00321 0.00321 0.00321</span></span></code></pre></div>
<p>But this function is way more powerful than just that. You can also
get the values for all parameters in a given formalism
(<code>formalisme</code> in French, yes some variables are still written
in French in STICS). To do so, use the <code>select</code> argument like
so:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">values</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_param_xml.html">get_param_xml</a></span><span class="op">(</span><span class="va">plant_file</span>,</span>
<span>  select <span class="op">=</span> <span class="st">"formalisme"</span>,</span>
<span>  select_value <span class="op">=</span> <span class="st">"radiation interception"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">values</span><span class="op">)</span> <span class="co"># For pretty-printing</span></span>
<span><span class="co">#&gt; maisopti_plt.xml.codetransrad        maisopti_plt.xml.forme </span></span>
<span><span class="co">#&gt;                             1                             1 </span></span>
<span><span class="co">#&gt;     maisopti_plt.xml.rapforme        maisopti_plt.xml.adfol </span></span>
<span><span class="co">#&gt;                             4                             1 </span></span>
<span><span class="co">#&gt;      maisopti_plt.xml.dfolbas     maisopti_plt.xml.dfolhaut </span></span>
<span><span class="co">#&gt;                             5                             5</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="set-parameter-values">Set parameter values<a class="anchor" aria-label="anchor" href="#set-parameter-values"></a>
</h4>
<p>We can also change the value of a parameter programmatically using
<code><a href="../reference/set_param_xml.html">set_param_xml()</a></code>. It is used similarly to
<code><a href="../reference/get_param_xml.html">get_param_xml()</a></code>. For example if we want to increase
<code>dlaimax</code> by 30%:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">dlaimax</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1.3</span></span>
<span><span class="fu"><a href="../reference/set_param_xml.html">set_param_xml</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">plant_file</span>, param <span class="op">=</span> <span class="st">"dlaimax"</span>, values <span class="op">=</span> <span class="va">new_values</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Donâ€™t forget to use the <code>overwrite</code> argument and set it to
<code>TRUE</code>. It is <code>FALSE</code> by default to avoid any
mishandling.</p>
<p>New values written in the file can be checked:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dlaimax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_param_xml.html">get_param_xml</a></span><span class="op">(</span><span class="va">plant_file</span>, <span class="st">"dlaimax"</span><span class="op">)</span></span>
<span><span class="va">dlaimax</span></span>
<span><span class="co">#&gt; $maisopti_plt.xml</span></span>
<span><span class="co">#&gt; $maisopti_plt.xml$dlaimax</span></span>
<span><span class="co">#&gt; [1] 0.004173 0.004173 0.004173 0.004173 0.004173</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="generate-observations-files">Generate observations files<a class="anchor" aria-label="anchor" href="#generate-observations-files"></a>
</h4>
<p>We can generate observation files from a <code>data.frame</code>
using <code><a href="../reference/gen_obs.html">gen_obs()</a></code>.</p>
<p>Lets create some dummy <code>data.frame</code> first:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  usm_name <span class="op">=</span> <span class="st">"Test"</span>, ian <span class="op">=</span> <span class="fl">2021</span>, mo <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">10</span>, jo <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  `masec(n)` <span class="op">=</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="fl">3</span><span class="op">:</span><span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then we can write the data to a file using
<code><a href="../reference/gen_obs.html">gen_obs()</a></code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gen_obs.html">gen_obs</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">obs_df</span>, out_dir <span class="op">=</span> <span class="st">"/path/to/dest/dir"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="read-observations-files">Read observations files<a class="anchor" aria-label="anchor" href="#read-observations-files"></a>
</h4>
<p>We can read the observation files in a workspace using
<code><a href="../reference/get_obs.html">get_obs()</a></code>. Note that all observation files should be named
after the USM they are linked to. See the help page for more details,
<em>e.g.</em> about intercrops.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_obs.html">get_obs</a></span><span class="op">(</span><span class="va">workspace</span><span class="op">)</span></span>
<span><span class="co">#&gt; bo96iN+.obs</span></span>
<span><span class="co">#&gt; bou00t1.obs</span></span>
<span><span class="co">#&gt; bou00t3.obs</span></span>
<span><span class="co">#&gt; bou99t1.obs</span></span>
<span><span class="co">#&gt; bou99t3.obs</span></span>
<span><span class="co">#&gt; lu96iN+.obs</span></span>
<span><span class="co">#&gt; lu96iN6.obs</span></span>
<span><span class="co">#&gt; lu97iN+.obs</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="read-simulation-files">Read simulation files<a class="anchor" aria-label="anchor" href="#read-simulation-files"></a>
</h4>
<p>Likewise, we can read the observation files in a workspace using
<code><a href="../reference/get_sim.html">get_sim()</a></code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sim.html">get_sim</a></span><span class="op">(</span><span class="va">workspace</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in get_file_(workspace = x, usm_name = usm_name, usms_filepath =</span></span>
<span><span class="co">#&gt; usms_path, : Not any sim file detected in</span></span>
<span><span class="co">#&gt; workspace/tmp/RtmpjkDYAq/data-master/</span></span>
<span><span class="co">#&gt; study_case_1/V10.0/XmlFiles</span></span></code></pre></div>
<p>But as there arenâ€™t any simulations yet in the workspace, the
function will return an error. To make a simulation, head to <a href="https://sticsrpacks.github.io/SticsOnR/" class="external-link">SticsOnR</a>. Then to
plot both observations and simulations, you can use <a href="https://sticsrpacks.github.io/CroPlotR/" class="external-link">CroPlotR</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Patrice Lecharpentier, Remi Vezy, Samuel Buis, Michel Giner.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
